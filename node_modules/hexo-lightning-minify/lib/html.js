"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.minifyHtml = void 0;
const node_1 = require("@minify-html/node");
const html_minifier_1 = require("html-minifier");
const utils_1 = require("./utils");
async function minifyHtml(str, data) {
    const { options, exclude, minifier } = this.config.minify.html;
    if ((0, utils_1.isExclude)(data.path, exclude))
        return str;
    if (minifier === 'minify-html') {
        return (0, node_1.minify)(Buffer.from(str), {
            keep_spaces_between_attributes: true,
            keep_comments: options.comments
        }).toString();
    }
    else {
        return (0, html_minifier_1.minify)(str, {
            removeComments: !options.comments
        });
    }
}
exports.minifyHtml = minifyHtml;
