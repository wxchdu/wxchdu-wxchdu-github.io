!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).anime=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new r(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null};var s=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const a=e[s];t["easeIn"+s]=a,t["easeOut"+s]=()=>t=>1-a()(1-t),t["easeInOut"+s]=()=>t=>t<.5?a()(2*t)/2:1-a()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-a()(1-2*t))/2:(a()(2*t-1)+1)/2})),t};const a=["translateX","translateY","translateZ"],n=(t,e)=>t instanceof HTMLElement&&t.style&&"transform"in t.style&&a.includes(e)?"transform":t instanceof HTMLElement&&t.style&&e in t.style?"style":"attribute";class r{constructor(t=e){t=Object.assign({},e,t);const{targets:s,duration:a,easing:n,delay:r,begin:i,update:o,complete:l,...c}=t;this.targets=s,this.duration=a,this.easing=n,this.delay=r,this.begin=i,this.update=o,this.complete=l,this.dest=c||{},this.tl=null,this.isPlay=!1}timeline(){return null===this.tl&&(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now()+t.delay,a=e+t.duration,r=!!t.targets,i=[],o=(t,e,s,a,r,i=!1)=>{let o;if("string"==typeof a)if(a.endsWith("%"))o="%",a=parseFloat(a);else{if(!a.endsWith("px"))throw new TypeError("string value must ends with '%' or 'px'");o="px",a=parseFloat(a)}let l=i?a:(a-e)*s+e;switch(o&&(l+=o),n(t,r)){case"transform":t.style.transform=o?`${r}(${l})`:`${r}(${l}px)`;break;case"style":t.style[r]=l;break;case"attribute":t[r]=l}},l=(a,n,r=!1)=>{t.targets.forEach(((l,c)=>{Object.keys(t.dest).forEach((u=>{const f=parseFloat(i[c][u]);let h=t.dest[u];if("object"==typeof h)if(Array.isArray(h)){let i=0;for(;i<h.length&&!(n-e<h[i].startTimeStamp);i++);const{value:c,duration:p,easing:y,startTimeStamp:d}=h[i-1];n<=e+p+d?(a=s()[y||t.easing]()((n-e)/p),o(l,f,a,c,u)):r&&o(l,f,a,c,u,r)}else{const{value:i,duration:c,easing:p}=h;n<=e+c?(a=s()[p||t.easing]()((n-e)/c),o(l,f,a,i,u)):r&&o(l,f,a,i,u,r)}else"function"==typeof h&&(h=h(l,c)),o(l,f,a,h,u,r)}))}))},c=()=>{const n=Date.now();if(n>a)return l(1,n,!0),"function"==typeof t.complete&&t.complete(t.targets),void(t.isPlay=!1);if(n<e)return void requestAnimationFrame(c);const i=s()[t.easing]()((n-e)/t.duration);r&&l(i,n),"function"==typeof t.update&&t.update(t.targets),requestAnimationFrame(c)};(()=>{if(r){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const a in t.dest){const r=t.dest[a];if(Array.isArray(r))if(2===r.length&&"object"!=typeof r[0]){switch(n(e,a)){case"transform":"string"==typeof r[0]?e.style.transform=`${a}(${r[0]})`:e.style.transform=`${a}(${r[0]}px)`;break;case"style":e.style[a]=r[0];break;case"attribute":e[a]=r[0]}s[a]=r[0],t.dest[a]=r[1]}else{let t=0;for(let e of r)e.startTimeStamp=t,t+=e.duration;s[a]=e[a]}else switch(n(e,a)){case"transform":const t=new RegExp(`${a}((w+))`,"g");s[a]=e.style.transform.match(t)[0];break;case"style":s[a]=e.style[a];break;case"attribute":s[a]=e[a]}}i.push(s)}}})(),"function"==typeof t.begin&&t.begin(t.targets),c()})(this))}}const i=t=>new r(t);return i.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},i}));
